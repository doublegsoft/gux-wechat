/*
** ──────────────────────────────────────────────────
** ─██████████████─██████──██████─████████──████████─
** ─██░░░░░░░░░░██─██░░██──██░░██─██░░░░██──██░░░░██─
** ─██░░██████████─██░░██──██░░██─████░░██──██░░████─
** ─██░░██─────────██░░██──██░░██───██░░░░██░░░░██───
** ─██░░██─────────██░░██──██░░██───████░░░░░░████───
** ─██░░██──██████─██░░██──██░░██─────██░░░░░░██─────
** ─██░░██──██░░██─██░░██──██░░██───████░░░░░░████───
** ─██░░██──██░░██─██░░██──██░░██───██░░░░██░░░░██───
** ─██░░██████░░██─██░░██████░░██─████░░██──██░░████─
** ─██░░░░░░░░░░██─██░░░░░░░░░░██─██░░░░██──██░░░░██─
** ─██████████████─██████████████─████████──████████─
** ──────────────────────────────────────────────────
*/
const gx = {
  presentPath: null,
};

gx.navigateBack = function (opt) {
  wx.navigateBack({
    success: (res) => {
      gx.presentPath = null;
      if (opt && opt.success) {
        opt.success();
      }
    },
  });
};

gx.navigateTo = function (opt) {
  let url = opt.url;
  let path;
  let index = url.indexOf('?');
  if (index != -1) {
    path = url.substring(0, index);
  } else {
    path = url;
  }
  if (gx.presentPath === path) {
    return;
  }
  wx.navigateTo({
    url: url,
    events: opt.events || {},
    success: () => {
      gx.presentPath = path;
    },
  })
};

gx.redirectTo = function (opt) {
  
};

module.exports = { gx };
